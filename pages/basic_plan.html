<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Remblyx Dashboard - Basic Plan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ====================== Dashboard Styles ====================== */
    *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif;}
    body{background:#f5f5f5; min-height:100vh; color:#222; display:flex; justify-content:center; align-items:flex-start; padding:16px;}
    .wrapper{width:100%; max-width:1200px; margin-top:58px; display:flex; flex-direction:column; gap:16px;}
    .board-wrapper { background:#f9fafb; border:1px solid #e5e7eb; border-radius:12px; padding:16px; max-width:600px; }
    button { padding:8px 12px; border:none; border-radius:6px; background:#4CAF50; color:white; cursor:pointer; }
    button:hover { background:#45a049; }
    .dependant-info { margin-top:12px; padding:12px; background:#fff; border-left:4px solid #4CAF50; border-radius:6px; }
    .remove-btn { background:#f87171; margin-top:8px; }
    .remove-btn:hover { background:#dc2626; }
    .schedule-table { margin-top:12px; border-collapse: collapse; width:100%; }
    .schedule-table th, .schedule-table td { border:1px solid #ccc; padding:8px; text-align:center; }
    .schedule-table th { background:#f3f4f6; }

    /* ====================== Modal Styles ====================== */
    .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
    .modal.active { display:flex; }
    .modal-content { background:#fff; padding:20px; border-radius:12px; width:90%; max-width:400px; box-shadow:0 8px 24px rgba(0,0,0,0.3); }
    .modal-content h2 { margin-top:0; }
    .modal-content label { display:block; margin:8px 0 4px; font-weight:600; }
    .modal-content input, .modal-content select { width:100%; padding:6px 8px; margin-bottom:10px; border:1px solid #ccc; border-radius:6px; box-sizing:border-box; }
    .modal-content .dosage-row { display:flex; gap:6px; align-items:center; }
    .modal-content .dosage-row input { flex:2; }
    .modal-content .dosage-row select { flex:1; }
    .placeholder { color:#999; }
    .error { color:red; font-weight:bold; margin-bottom:8px; }
  </style>
</head>
<body>

<div class="wrapper">
  <!-- ====================== Main Dashboard ====================== -->
  <div class="board-wrapper">
    <h2>Basic Plan Dashboard</h2>
    
    <!-- Add Dependant Button -->
    <button id="addDependantBtn">Add Dependant</button>

    <!-- Dependant Info Display -->
    <div id="dependantInfo" class="dependant-info" style="display:none;">
      <h3>Dependant Profile</h3>
      <p><strong>Name:</strong> <span id="dispName"></span></p>
      <p><strong>Medicine Type:</strong> <span id="dispMedicine"></span></p>
      <p><strong>Times:</strong> <span id="dispTimes"></span></p>
      <p><strong>Dosage:</strong> <span id="dispDosage"></span></p>
      <p><strong>Notes:</strong> <span id="dispNotes"></span></p>
      <button id="removeDependantBtn" class="remove-btn">Remove Dependant</button>

      <!-- Medication schedule table -->
      <table id="scheduleTable" class="schedule-table" style="display:none;">
        <thead>
          <tr>
            <th>Dose #</th>
            <th>Medicine</th>
            <th>Dosage</th>
            <th>Time</th>
          </tr>
        </thead>
        <tbody id="scheduleBody"></tbody>
      </table>
    </div>
  </div>
</div>

<!-- ====================== Dependant Modal ====================== -->
<div id="dependantModal" class="modal">
  <div class="modal-content">
    <h2>Add Dependant</h2>
    <p class="error" id="modalError"></p>
    <form id="dependantForm">
      <label for="depName">Name:</label>
      <input type="text" id="depName" required />

      <label for="depMedicine">Type of Medicine:</label>
      <input type="text" id="depMedicine" required />

      <label for="depTimes">Times (per day):</label>
      <input type="number" id="depTimes" min="1" placeholder="Enter number of times per day" required />

      <label for="depDosage">Dosage:</label>
      <div class="dosage-row">
        <input type="number" id="depDosageNumber" min="0" placeholder="Amount" required />
        <select id="depDosageUnit">
          <option value="">Unit</option>
          <option value="mg">mg</option>
          <option value="g">g</option>
        </select>
      </div>

      <label for="depNotes">Notes:</label>
      <input type="text" id="depNotes" placeholder="Optional notes" />

      <button type="submit">Save Dependant</button>
      <button type="button" id="closeModalBtn" style="background:#f87171;margin-top:4px;">Cancel</button>
    </form>
  </div>
</div>

<!-- ====================== JavaScript ====================== -->
<script>
  let dependantAdded = false;

  const addBtn = document.getElementById('addDependantBtn');
  const modal = document.getElementById('dependantModal');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const form = document.getElementById('dependantForm');
  const errorMsg = document.getElementById('modalError');

  const infoBox = document.getElementById('dependantInfo');
  const dispName = document.getElementById('dispName');
  const dispMedicine = document.getElementById('dispMedicine');
  const dispTimes = document.getElementById('dispTimes');
  const dispDosage = document.getElementById('dispDosage');
  const dispNotes = document.getElementById('dispNotes');
  const removeBtn = document.getElementById('removeDependantBtn');

  const scheduleTable = document.getElementById('scheduleTable');
  const scheduleBody = document.getElementById('scheduleBody');

  const depDosageNumber = document.getElementById('depDosageNumber');
  const depDosageUnit = document.getElementById('depDosageUnit');
  const depTimesInput = document.getElementById('depTimes');

  // Hide unit or times placeholders once user inputs values
  depDosageNumber.addEventListener('input', () => { depDosageUnit.style.display = 'none'; });
  depDosageUnit.addEventListener('change', () => { depDosageNumber.style.display = 'none'; });
  depTimesInput.addEventListener('input', () => { depTimesInput.placeholder = ''; });

  // Open modal
  addBtn.addEventListener('click', () => {
    if(dependantAdded){
      alert("You can only add one dependant in the Basic plan.");
      return;
    }
    modal.classList.add('active');
  });

  // Close modal
  closeModalBtn.addEventListener('click', () => {
    modal.classList.remove('active');
    form.reset();
    errorMsg.textContent = '';
    depDosageNumber.style.display = 'block';
    depDosageUnit.style.display = 'block';
    depTimesInput.placeholder = "Enter number of times per day";
  });

  // Handle form submit
  form.addEventListener('submit', function(e){
    e.preventDefault();

    const name = document.getElementById('depName').value;
    const medicine = document.getElementById('depMedicine').value;
    const times = parseInt(document.getElementById('depTimes').value);
    const dosageNumber = depDosageNumber.value;
    const dosageUnit = depDosageUnit.value;
    const notes = document.getElementById('depNotes').value;

    if(!name || !medicine || !times || !dosageNumber || !dosageUnit){
      errorMsg.textContent = "Please fill all required fields.";
      return;
    }

    const dosageText = `${dosageNumber} ${dosageUnit}`;

    // Display dependant info
    dispName.textContent = name;
    dispMedicine.textContent = medicine;
    dispTimes.textContent = times + (times > 1 ? " times/day" : " time/day");
    dispDosage.textContent = dosageText;
    dispNotes.textContent = notes || "None";

    // Generate medication schedule
    scheduleBody.innerHTML = '';
    for(let i=1; i<=times; i++){
      const row = document.createElement('tr');
      row.innerHTML = `<td>${i}</td><td>${medicine}</td><td>${dosageText}</td><td>--:--</td>`;
      scheduleBody.appendChild(row);
    }
    scheduleTable.style.display = 'table';

    infoBox.style.display = 'block';
    dependantAdded = true;

    // Close modal and reset
    modal.classList.remove('active');
    form.reset();
    errorMsg.textContent = '';
    depDosageNumber.style.display = 'block';
    depDosageUnit.style.display = 'block';
    depTimesInput.placeholder = "Enter number of times per day";
  });

  // Remove dependant
  removeBtn.addEventListener('click', () => {
    if(confirm("Are you sure you want to remove this dependant?")){
      infoBox.style.display = 'none';
      scheduleTable.style.display = 'none';
      dependantAdded = false;
      depDosageNumber.style.display = 'block';
      depDosageUnit.style.display = 'block';
      depTimesInput.placeholder = "Enter number of times per day";
    }
  });
</script>

</body>
</html>
