<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Dashboard | Remblyx</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root{
    --sidebar-width:220px;
    --radius-lg:18px;
    --radius-md:12px;
    --text-sm:14px;
    --text-base:16px;
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif;}
  body{background:#f5f5f5;display:flex;min-height:100vh;color:#222;}

  /* Sidebar */
  .sidebar{
    width:var(--sidebar-width);
    background:#111827;color:#e5e7eb;
    display:flex;flex-direction:column;padding:20px 10px;
    gap:10px;
  }
  .sidebar-title{font-size:var(--text-sm);color:#9ca3af;margin-bottom:8px;text-transform:uppercase;}
  .nav-item{display:flex;align-items:center;gap:8px;padding:10px;border-radius:8px;cursor:pointer;transition:.2s;color:#d1d5db;}
  .nav-item:hover{background:rgba(249,250,251,.06);}
  .nav-item.active{background:#111827;border-left:3px solid #667eea;padding-left:10px;color:#fff;}
  .icon-dot{width:8px;height:8px;border-radius:999px;background:#4ade80;}

  /* Main content */
  .main-area{flex:1;padding:20px;overflow:auto;}
  .section{display:none;}
  .section.active{display:block;}
  h2{font-size:18px;margin-bottom:10px;}

  /* Table styles */
  table{width:100%;border-collapse:collapse;margin-bottom:16px;}
  th, td{padding:8px;text-align:left;border-bottom:1px solid #e5e7eb;}
  th{background:#f3f4f6;font-weight:600;color:#6b7280;}
  tr:hover{background:#f9fafb;}
  .btn{padding:6px 12px;border:none;border-radius:6px;background:#4CAF50;color:white;cursor:pointer;}
  .btn:hover{background:#45a049;}
  .btn-edit{background:#3b82f6;}
  .btn-edit:hover{background:#2563eb;}
  .btn-remove{background:#f87171;}
  .btn-remove:hover{background:#dc2626;}

  /* Timeline styles */
  .timeline{border-left:3px solid #667eea;margin-left:10px;padding-left:10px;}
  .timeline-item{margin-bottom:14px;position:relative;}
  .timeline-item::before{content:"";position:absolute;left:-7px;top:0;width:12px;height:12px;background:#667eea;border-radius:50%;}
  .timeline-item span.time{font-size:12px;color:#6b7280;margin-left:6px;}
  .timeline-item span.dependant{font-weight:600;margin-left:6px;}

  /* Compliance */
  .progress-container{background:#e5e7eb;border-radius:6px;width:100%;height:16px;margin-top:4px;}
  .progress-bar{background:#4ade80;height:16px;border-radius:6px;width:0%;text-align:right;color:#fff;padding-right:4px;font-size:12px;line-height:16px;}
</style>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-title">Dashboard</div>
  <div class="nav-item active" data-section="dependants"><span class="icon-dot"></span>Dependants</div>
  <div class="nav-item" data-section="timeline"><span class="icon-dot"></span>Timeline</div>
  <div class="nav-item" data-section="compliance"><span class="icon-dot"></span>Compliance Summary</div>
</div>

<div class="main-area">
  <!-- Dependants Section -->
  <div id="dependants" class="section active">
    <h2>Dependants</h2>
    <button class="btn" id="addDependantBtn">Add Dependant</button>
    <table id="dependantsTable">
      <thead>
        <tr><th>Name</th><th>Phone</th><th>Medicine</th><th>Times/Day</th><th>Dosage</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Timeline Section -->
  <div id="timeline" class="section">
    <h2>Upcoming Reminders</h2>
    <div id="timelineList" class="timeline"></div>
  </div>

  <!-- Compliance Section -->
  <div id="compliance" class="section">
    <h2>Compliance Summary</h2>
    <table id="complianceTable">
      <thead><tr><th>Dependant</th><th>Completed</th><th>Pending</th><th>Compliance</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</div>

<script>
  // Sidebar navigation
  const navItems=document.querySelectorAll('.nav-item');
  const sections=document.querySelectorAll('.section');
  navItems.forEach(item=>{
    item.addEventListener('click',()=>{
      navItems.forEach(i=>i.classList.remove('active'));
      item.classList.add('active');
      const section=item.getAttribute('data-section');
      sections.forEach(s=>s.classList.remove('active'));
      document.getElementById(section).classList.add('active');
    });
  });

  // Data
  let dependants=[];
  let timelineReminders=[];

  const dependantsTableBody=document.querySelector('#dependantsTable tbody');
  const timelineList=document.getElementById('timelineList');
  const complianceTableBody=document.querySelector('#complianceTable tbody');

  function renderDependants(){
    dependantsTableBody.innerHTML='';
    dependants.forEach((d,i)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td>${d.name}</td>
        <td>${d.phone}</td>
        <td>${d.medicine}</td>
        <td>${d.timesPerDay}</td>
        <td>${d.dosage}</td>
        <td>
          <button class="btn btn-edit" onclick="editDependant(${i})">Edit</button>
          <button class="btn btn-remove" onclick="removeDependant(${i})">Remove</button>
        </td>`;
      dependantsTableBody.appendChild(tr);
    });
    renderTimeline();
    renderCompliance();
  }

  function renderTimeline(){
    timelineList.innerHTML='';
    timelineReminders.forEach(r=>{
      const div=document.createElement('div');
      div.className='timeline-item';
      div.innerHTML=`<strong>${r.medicine}</strong> <span class="dependant">${r.dependant}</span> at <span class="time">${r.time}</span>`;
      div.style.cursor='pointer';
      div.onclick=()=>{alert('Go to '+r.dependant+' details');};
      timelineList.appendChild(div);
    });
  }

  function renderCompliance(){
    complianceTableBody.innerHTML='';
    dependants.forEach(d=>{
      const completed=timelineReminders.filter(r=>r.dependant===d.name && r.completed).length;
      const pending=timelineReminders.filter(r=>r.dependant===d.name && !r.completed).length;
      const total=completed+pending;
      const percent=total?Math.round((completed/total)*100):0;
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${d.name}</td><td>${completed}</td><td>${pending}</td>
        <td>
          <div class="progress-container"><div class="progress-bar" style="width:${percent}%">${percent}%</div></div>
        </td>`;
      complianceTableBody.appendChild(tr);
    });
  }

  // Add dependant button
  document.getElementById('addDependantBtn').addEventListener('click',()=>{
    const name=prompt('Dependant Name:');
    if(!name) return;
    const phone=prompt('Phone:');
    const medicine=prompt('Medicine:');
    const timesPerDay=prompt('Times per day:');
    const dosage=prompt('Dosage:');
    dependants.push({name, phone, medicine, timesPerDay, dosage});
    // Add sample reminders
    timelineReminders.push({dependant:name, medicine:medicine, time:'09:00 AM', completed:false});
    timelineReminders.push({dependant:name, medicine:medicine, time:'21:00 PM', completed:false});
    renderDependants();
  });

  function editDependant(index){
    const d=dependants[index];
    const name=prompt('Dependant Name:',d.name);
    if(!name) return;
    const phone=prompt('Phone:',d.phone);
    const medicine=prompt('Medicine:',d.medicine);
    const timesPerDay=prompt('Times per day:',d.timesPerDay);
    const dosage=prompt('Dosage:',d.dosage);
    dependants[index]={name, phone, medicine, timesPerDay, dosage};
    renderDependants();
  }

  function removeDependant(index){
    if(!confirm('Remove this dependant?')) return;
    const name=dependants[index].name;
    dependants.splice(index,1);
    timelineReminders=timelineReminders.filter(r=>r.dependant!==name);
    renderDependants();
  }

  renderDependants();
</script>

</body>
</html>
