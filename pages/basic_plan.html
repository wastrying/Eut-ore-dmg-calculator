<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Remblyx Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif;}
body{background:#f0f2f5;color:#333;padding:20px;}
h1{text-align:center;margin-bottom:30px;}
.dashboard-container{
    max-width:1000px;
    margin:0 auto;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
    gap:20px;
}
.card{
    background:#fff;
    border-radius:12px;
    padding:20px;
    display:flex;
    align-items:center;
    gap:15px;
    box-shadow:0 6px 20px rgba(0,0,0,0.08);
    cursor:pointer;
    transition:transform 0.2s, box-shadow 0.2s;
}
.card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(0,0,0,0.12);}
.card-icon{font-size:28px;color:#4CAF50;flex-shrink:0;}
.card-title{font-size:18px;font-weight:bold;color:#1f2937;}
.card-desc{font-size:13px;color:#555;}

/* Sections */
.section{display:none;margin-top:40px;padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.05);}
.dependant-card{background:#f9fafb;padding:15px;border-left:4px solid #4CAF50;border-radius:8px;margin-bottom:10px;}
.dependant-actions{margin-top:10px;}
.dependant-actions button{padding:6px 10px;margin-right:6px;border:none;border-radius:6px;background:#4CAF50;color:white;cursor:pointer;}
.dependant-actions button.remove{background:#f87171;}
.dependant-actions button:hover{opacity:0.9;}
.reminder{padding:12px;border-left:4px solid #4CAF50;margin-bottom:10px;background:#f9fafb;border-radius:8px;cursor:pointer;transition:background 0.2s;}
.reminder:hover{background:#e0f2f1;}

/* Modal */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index:1000;}
.modal.active{display:flex;}
.modal-content{background:#fff;padding:20px;border-radius:12px;width:90%;max-width:400px;box-shadow:0 8px 24px rgba(0,0,0,0.3);}
.modal-content h2{margin-top:0;}
.modal-content label{display:block;margin:8px 0 4px;font-weight:600;}
.modal-content input,.modal-content select{width:100%;padding:6px 8px;margin-bottom:10px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;}
.modal-content .dosage-row{display:flex;gap:6px;}
.modal-content .dosage-row input{flex:1;}
.modal-content .dosage-row select{flex:1;}
.time-picker-container{display:none;margin-top:10px;}
.time-picker-container .time-input{display:block;margin-bottom:6px;}
.error{color:red;font-weight:bold;margin-bottom:8px;}
.delete-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:12px;padding:24px;box-shadow:0 8px 24px rgba(0,0,0,0.3);display:none;z-index:2000;max-width:400px;text-align:center;}
.delete-popup p{margin-bottom:20px;font-weight:600;}
.delete-popup button{margin:0 8px;padding:8px 14px;border:none;border-radius:6px;cursor:pointer;}
.btn-confirm{background:#f87171;color:white;}
.btn-cancel{background:#9ca3af;color:white;}
</style>
</head>
<body>

<h1>Remblyx Dashboard</h1>

<div class="dashboard-container">
    <div class="card" onclick="openDependantModal()">
        <div class="card-icon">üë§</div>
        <div>
            <div class="card-title">Dependants</div>
            <div class="card-desc">View and manage dependant profiles</div>
        </div>
    </div>

    <div class="card" onclick="showSection('summary')">
        <div class="card-icon">üìä</div>
        <div>
            <div class="card-title">Summary</div>
            <div class="card-desc">Overview of progress and responses</div>
        </div>
    </div>

    <div class="card" onclick="showSection('reminders')">
        <div class="card-icon">‚è∞</div>
        <div>
            <div class="card-title">Upcoming Reminders</div>
            <div class="card-desc">Click to see upcoming medication & appointments</div>
        </div>
    </div>
</div>

<!-- Sections -->
<div id="dependants" class="section">
    <h2>Dependants</h2>
    <div id="dependantList" class="dependant-card">
        <p><strong>Name:</strong> <span id="dispName">John Doe</span></p>
        <p><strong>Phone:</strong> <span id="dispPhone">91234567</span></p>
        <p><strong>Medicine:</strong> <span id="dispMedicine">Paracetamol</span></p>
        <p><strong>Dosage:</strong> <span id="dispDosage">500 mg, 2 times/day</span></p>
        <p><strong>Times:</strong> <span id="dispTimes">08:00, 20:00</span></p>
        <p><strong>Notes:</strong> <span id="dispNotes">NA</span></p>
        <div class="dependant-actions">
            <button onclick="editDependant()">Edit</button>
            <button class="remove" onclick="removeDependant()">Remove</button>
        </div>
    </div>
</div>

<div id="summary" class="section">
    <h2>Summary</h2>
    <p>John Doe responded to <strong>1</strong> of <strong>2</strong> reminders today.</p>
</div>

<div id="reminders" class="section">
    <h2>Upcoming Reminders</h2>
    <div class="reminder" onclick="scrollToDependant('dependantList')">
        <p><strong>08:00 AM:</strong> Paracetamol for John Doe</p>
    </div>
    <div class="reminder" onclick="scrollToDependant('dependantList')">
        <p><strong>03:00 PM:</strong> Doctor Check-up for John Doe</p>
    </div>
</div>

<!-- Dependant Modal -->
<div id="dependantModal" class="modal">
    <div class="modal-content">
        <h2 id="modalTitle">Add Dependant</h2>
        <p class="error" id="modalError"></p>
        <form id="dependantForm">
            <label>Name:</label><input type="text" id="depName" required />
            <label>Phone:</label><input type="text" id="depPhone" required />
            <label>Medicine:</label><input type="text" id="depMedicine" required />
            <label>Dosage:</label>
            <div class="dosage-row">
                <input type="number" id="depDosageNumber" min="1" value="1" required />
                <select id="depDosageUnit" required>
                    <option value="">Unit</option><option value="mg">mg</option><option value="g">g</option>
                </select>
            </div>
            <label>Times per day:</label><input type="number" id="depDosageTimes" min="1" max="10" value="1" required />
            <div id="timePickerContainer" class="time-picker-container">
                <label>Times to Take Medicine:</label>
                <div id="timeInputs"></div>
            </div>
            <label>Additional Notes:</label><input type="text" id="depNotes" placeholder="NA" required />
            <button type="submit">Save</button>
            <button type="button" onclick="closeModal()" style="background:#9ca3af;margin-top:4px;">Cancel</button>
        </form>
    </div>
</div>

<script>
// Sections
function showSection(id){
    ['dependants','summary','reminders'].forEach(s=>document.getElementById(s).style.display = (s===id)?'block':'none');
}

// Scroll to dependant
function scrollToDependant(id){
    showSection('dependants');
    const el=document.getElementById(id);
    if(el){el.scrollIntoView({behavior:'smooth',block:'start'});}
}

// Modal handling
let editing=false;
function openDependantModal(){ 
    editing=false; 
    document.getElementById('modalTitle').innerText='Add Dependant';
    document.getElementById('dependantModal').classList.add('active'); 
}

function closeModal(){ document.getElementById('dependantModal').classList.remove('active'); }

function editDependant(){
    editing=true;
    document.getElementById('modalTitle').innerText='Edit Dependant';
    document.getElementById('depName').value = document.getElementById('dispName').innerText;
    document.getElementById('depPhone').value = document.getElementById('dispPhone').innerText;
    document.getElementById('depMedicine').value = document.getElementById('dispMedicine').innerText;
    document.getElementById('depDosageNumber').value = parseInt(document.getElementById('dispDosage').innerText);
    document.getElementById('depDosageUnit').value = document.getElementById('dispDosage').innerText.split(' ')[1];
    document.getElementById('depDosageTimes').value = parseInt(document.getElementById('dispDosage').innerText.match(/\d+/g)[1]);
    document.getElementById('depNotes').value = document.getElementById('dispNotes').innerText;
    document.getElementById('dependantModal').classList.add('active');
}

function removeDependant(){
    if(confirm("Are you sure you want to remove this dependant?")){
        document.getElementById('dispName').innerText='';
        document.getElementById('dispPhone').innerText='';
        document.getElementById('dispMedicine').innerText='';
        document.getElementById('dispDosage').innerText='';
        document.getElementById('dispTimes').innerText='';
        document.getElementById('dispNotes').innerText='';
    }
}

// Save dependant
document.getElementById('dependantForm').addEventListener('submit', function(e){
    e.preventDefault();
    document.getElementById('dispName').innerText = document.getElementById('depName').value;
    document.getElementById('dispPhone').innerText = document.getElementById('depPhone').value;
    document.getElementById('dispMedicine').innerText = document.getElementById('depMedicine').value;
    document.getElementById('dispDosage').innerText = document.getElementById('depDosageNumber').value + ' ' + document.getElementById('depDosageUnit').value + ', ' + document.getElementById('depDosageTimes').value + ' times/day';
    let timesArray = [];
    for(let i=0;i<parseInt(document.getElementById('depDosageTimes').value);i++){ timesArray.push('08:00'); } // placeholder
    document.getElementById('dispTimes').innerText = timesArray.join(', ');
    document.getElementById('dispNotes').innerText = document.getElementById('depNotes').value;
    closeModal();
    showSection('dependants');
});
</script>

</body>
</html>
