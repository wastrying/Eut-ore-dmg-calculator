<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MediSignal - Alarm Dashboard</title>
  <style>
    :root{
      --sidebar-bg: #1f2937;
      --sidebar-text: #e5e7eb;
      --accent: #3b82f6;
      --card-bg: #ffffff;
      --muted: #6b7280;
      --bg: #f9fafb;
      --picker-bg: #ffffff;
      --picker-highlight: rgba(0,0,0,0.06);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      display:flex;height:100vh;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:var(--bg);color:#111827;
    }

    /* Sidebar */
    .sidebar{
      width:240px;background:var(--sidebar-bg);color:var(--sidebar-text);display:flex;flex-direction:column;padding:20px;gap:20px;
    }
    .sidebar h2{font-size:20px;font-weight:700}
    .nav a{display:block;color:var(--sidebar-text);text-decoration:none;padding:10px 0;font-size:14px;opacity:.9;transition:.18s;cursor:pointer}
    .nav a:hover{color:var(--accent);opacity:1}

    /* Topbar */
    .topbar{
      height:60px;background:#fff;border-bottom:1px solid #e5e7eb;display:flex;align-items:center;justify-content:space-between;padding:0 20px;position:sticky;top:0;z-index:10;
    }
    .topbar h1{font-size:18px;font-weight:600}
    .user{display:flex;align-items:center;gap:10px}
    .user img{width:32px;height:32px;border-radius:50%;object-fit:cover}
    .logout-btn{background:var(--accent);color:#fff;border:none;border-radius:6px;padding:8px 12px;cursor:pointer;font-size:13px;font-weight:600}

    /* Main area */
    .main{flex:1;display:flex;flex-direction:column;overflow:hidden}
    .content{flex:1;padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .card{background:var(--card-bg);border-radius:12px;padding:16px;box-shadow:0 4px 10px rgba(0,0,0,0.05);display:flex;flex-direction:column;gap:8px}
    .card h3{font-size:16px;font-weight:600}
    .card p{color:var(--muted);font-size:13px}

    /* Alarm view */
    .alarm-container{display:none;flex-direction:column;gap:16px;padding:20px;overflow:auto}
    .alarm-header{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .btn{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:8px;font-weight:600;cursor:pointer}
    .btn.secondary{background:#fff;color:#111;border:1px solid #e5e7eb}
    .small{padding:6px 10px;font-size:14px}

    /* Picker panel */
    .picker-panel{background:var(--picker-bg);border-radius:12px;padding:10px;max-width:720px;width:100%;box-shadow:0 6px 18px rgba(0,0,0,0.06);margin:0 auto}
    .picker-actions{display:flex;justify-content:space-between;align-items:center;padding:6px 8px}
    .picker-title{font-weight:700;font-size:16px}
    .picker-wheels{display:flex;justify-content:center;gap:12px;padding:10px 6px;align-items:center}
    .wheel{width:120px;height:180px;overflow-y:scroll;border-radius:8px;scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;background:transparent;text-align:center;position:relative}
    .wheel::-webkit-scrollbar{display:none}
    .wheel-list{padding:0;margin:0;list-style:none}
    .wheel-item{height:36px;display:flex;align-items:center;justify-content:center;font-size:20px;color:#111}
    .wheel::after{content:"";position:absolute;left:0;right:0;top:72px;height:36px;border-radius:8px;background:var(--picker-highlight);pointer-events:none}
    .picker-label{text-align:center;color:var(--muted);font-size:13px;margin-top:6px}

    /* NEW ↓ Day selector */
    .day-selector{display:flex;justify-content:center;gap:6px;flex-wrap:wrap;margin-top:10px}
    .day-btn{background:#f3f4f6;border:none;padding:6px 10px;border-radius:6px;font-size:13px;cursor:pointer;transition:.2s}
    .day-btn.active{background:var(--accent);color:#fff}
    .repeat-selector{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:10px;color:#111}
    select{padding:6px 10px;border-radius:6px;border:1px solid #e5e7eb;font-size:13px}

    /* Saved alarms list */
    .alarms-list{display:flex;flex-direction:column;gap:10px;max-width:720px;margin:0 auto}
    .alarm-row{display:flex;justify-content:space-between;align-items:center;background:#fff;padding:12px 14px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.04)}
    .alarm-left{display:flex;flex-direction:column}
    .alarm-time{font-weight:700;font-size:20px}
    .alarm-meta{color:var(--muted);font-size:13px}
    .alarm-actions{display:flex;align-items:center;gap:10px}
    .del-btn{background:transparent;border:1px solid #f3c0c0;color:#b82b2b;padding:6px 8px;border-radius:8px;cursor:pointer}

    /* Toggle switch */
    .switch{position:relative;display:inline-block;width:44px;height:24px}
    .switch input{opacity:0;width:0;height:0}
    .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ddd;transition:.25s;border-radius:34px}
    .slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background:#fff;border-radius:50%;transition:.25s}
    input:checked + .slider{background:var(--accent)}
    input:checked + .slider:before{transform:translateX(20px)}
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>mediSignal</h2>
    <nav class="nav">
      <a onclick="showDashboard()">Set Up</a>
      <a onclick="showAlarms()">Alarms</a>
      <a href="#">Projects</a>
      <a href="#">Tasks</a>
      <a href="#">Team</a>
      <a href="#">Reports</a>
    </nav>
  </div>

  <div class="main">
    <div class="topbar">
      <h1 id="pageTitle">Dashboard Overview</h1>
      <div class="user">
        <img src="https://i.pravatar.cc/100" alt="User avatar" />
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboardContent" class="content">
      <div class="card"><h3>Today's Tasks</h3><p>5 tasks due today</p></div>
      <div class="card"><h3>Team Updates</h3><p>3 new messages in #general</p></div>
      <div class="card"><h3>Performance</h3><p>Project completion rate: 82%</p></div>
      <div class="card"><h3>Next Meeting</h3><p>Today at 3:00 PM</p></div>
    </div>

    <!-- Alarms -->
    <div id="alarmContainer" class="alarm-container">
      <div class="alarm-header">
        <div style="display:flex;align-items:center;gap:12px">
          <button class="btn small" id="addModeBtn" onclick="enterAddMode()">＋ Add Alarm</button>
          <div style="color:var(--muted);font-weight:600">Manage alarms</div>
        </div>
        <div><button class="btn small" onclick="showDashboard()">Back</button></div>
      </div>

      <!-- Picker panel -->
      <div id="pickerPanel" class="picker-panel" style="display:none">
        <div class="picker-actions">
          <button class="btn secondary small" onclick="cancelAdd()">Cancel</button>
          <div class="picker-title">Add Alarm</div>
          <button class="btn small" onclick="saveNewAlarm()">Save</button>
        </div>

        <div class="picker-wheels">
          <div class="wheel" id="hourWheel"><ul id="hourList" class="wheel-list"></ul></div>
          <div class="wheel" id="minuteWheel"><ul id="minuteList" class="wheel-list"></ul></div>
          <div class="wheel" id="ampmWheel"><ul id="ampmList" class="wheel-list"></ul></div>
        </div>

        <div class="picker-label">Swipe up/down to select time</div>

        <!-- NEW ↓ Day selection -->
        <div class="day-selector" id="daySelector">
          <button class="day-btn" data-day="Mon">Mon</button>
          <button class="day-btn" data-day="Tue">Tue</button>
          <button class="day-btn" data-day="Wed">Wed</button>
          <button class="day-btn" data-day="Thu">Thu</button>
          <button class="day-btn" data-day="Fri">Fri</button>
          <button class="day-btn" data-day="Sat">Sat</button>
          <button class="day-btn" data-day="Sun">Sun</button>
          <button class="day-btn" data-day="Everyday">Everyday</button>
        </div>

        <!-- NEW ↓ Repeat count -->
        <div class="repeat-selector">
          <label for="repeatCount">Repeat:</label>
          <select id="repeatCount">
            <option value="none">None</option>
            <option value="1">1 time</option>
            <option value="2">2 times</option>
            <option value="3">3 times</option>
            <option value="4">4 times</option>
            <option value="5">5 times</option>
          </select>
        </div>
      </div>

      <!-- Saved alarms -->
      <div class="alarms-list" id="alarmsList"></div>
    </div>
  </div>

  <script>
    const dashboardContent = document.getElementById('dashboardContent');
    const alarmContainer = document.getElementById('alarmContainer');
    const pageTitle = document.getElementById('pageTitle');
    const pickerPanel = document.getElementById('pickerPanel');

    function showDashboard(){
      dashboardContent.style.display='grid';
      alarmContainer.style.display='none';
      pageTitle.textContent='Dashboard Overview';
      pickerPanel.style.display='none';
    }
    function showAlarms(){
      dashboardContent.style.display='none';
      alarmContainer.style.display='flex';
      pageTitle.textContent='Alarms';
      renderAlarmsList();
    }
    function logout(){window.location.href='index.html'}

    // --- alarms ---
    let alarms=[]; // {time,label,enabled,days,repeatCount}

    // wheel setup (unchanged)
    const ITEM_HEIGHT=36;
    const hourList=document.getElementById('hourList');
    const minuteList=document.getElementById('minuteList');
    const ampmList=document.getElementById('ampmList');
    const hourWheel=document.getElementById('hourWheel');
    const minuteWheel=document.getElementById('minuteWheel');
    const ampmWheel=document.getElementById('ampmWheel');

    function makeLi(text){const li=document.createElement('li');li.className='wheel-item';li.textContent=text;return li;}
    function populateWheelLists(){
      const buffer=2;
      const appendBuffer=(ul)=>{for(let i=0;i<buffer;i++)ul.appendChild(makeLi(''))};
      hourList.innerHTML=minuteList.innerHTML=ampmList.innerHTML='';
      appendBuffer(hourList);for(let h=1;h<=12;h++)hourList.appendChild(makeLi(String(h).padStart(2,' ')));appendBuffer(hourList);
      appendBuffer(minuteList);for(let m=0;m<60;m++)minuteList.appendChild(makeLi(String(m).padStart(2,'0')));appendBuffer(minuteList);
      appendBuffer(ampmList);['AM','PM'].forEach(x=>ampmList.appendChild(makeLi(x)));appendBuffer(ampmList);
    }
    function snapWheel(wheel){const idx=Math.round(wheel.scrollTop/ITEM_HEIGHT);wheel.scrollTo({top:idx*ITEM_HEIGHT,behavior:'smooth'});}
    function enableSnapping(w){let t;w.addEventListener('scroll',e=>{clearTimeout(t);t=setTimeout(()=>snapWheel(w),80)})}
    populateWheelLists();enableSnapping(hourWheel);enableSnapping(minuteWheel);enableSnapping(ampmWheel);
    window.addEventListener('load',()=>{setTimeout(()=>{snapWheel(hourWheel);snapWheel(minuteWheel);snapWheel(ampmWheel)},100)});

    function getPickerTime(){
      const getVal=(w)=>{const i=Math.round(w.scrollTop/ITEM_HEIGHT);const el=w.querySelectorAll('.wheel-item')[i];return el?el.textContent.trim():'';}
      let h=getVal(hourWheel),m=getVal(minuteWheel),a=getVal(ampmWheel);
      if(!h)h='12';if(!m)m='00';if(!a)a='AM';
      return {hour:h.padStart(2,'0'),minute:m,ampm:a};
    }

    // --- NEW ↓ day selector logic ---
    const dayBtns=document.querySelectorAll('.day-btn');
    let selectedDays=[];
    dayBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        const d=btn.dataset.day;
        if(d==='Everyday'){
          selectedDays=['Everyday'];
          dayBtns.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
        }else{
          if(selectedDays.includes('Everyday'))selectedDays=[];
          btn.classList.toggle('active');
          if(btn.classList.contains('active'))selectedDays.push(d);
          else selectedDays=selectedDays.filter(x=>x!==d);
        }
      });
    });

    function enterAddMode(){
      pickerPanel.style.display='block';
      selectedDays=[];dayBtns.forEach(b=>b.classList.remove('active'));
      document.getElementById('repeatCount').value='none';
    }
    function cancelAdd(){pickerPanel.style.display='none';}

    function saveNewAlarm(){
      const t=getPickerTime();
      const timeStr=`${parseInt(t.hour,10)}:${t.minute} ${t.ampm}`;
      const repeatCount=document.getElementById('repeatCount').value;
      const days=selectedDays.length?selectedDays:['None'];
      alarms.push({time:timeStr,label:'Alarm',enabled:true,days,repeatCount});
      pickerPanel.style.display='none';
      renderAlarmsList();
    }

    const alarmsListEl=document.getElementById('alarmsList');
    function renderAlarmsList(){
      alarmsListEl.innerHTML='';
      if(alarms.length===0){
        const e=document.createElement('div');
        e.style.color='var(--muted)';e.style.textAlign='center';e.style.padding='30px 0';
        e.textContent='No alarms yet. Click "Add Alarm" to create one.';alarmsListEl.appendChild(e);return;
      }
      alarms.forEach((a,i)=>{
        const row=document.createElement('div');
        row.className='alarm-row';
        row.innerHTML=`
          <div class="alarm-left">
            <div class="alarm-time">${a.time}</div>
            <div class="alarm-meta">${a.label} • ${a.days.join(', ')} • Repeat: ${a.repeatCount}</div>
          </div>
          <div class="alarm-actions">
            <label class="switch">
              <input type="checkbox" ${a.enabled?'checked':''} data-index="${i}">
              <span class="slider"></span>
            </label>
            <button class="del-btn" data-index="${i}">Delete</button>
          </div>`;
        row.querySelector('input').addEventListener('change',e=>{alarms[i].enabled=e.target.checked});
        row.querySelector('.del-btn').addEventListener('click',()=>{alarms.splice(i,1);renderAlarmsList()});
        alarmsListEl.appendChild(row);
      });
    }

    showDashboard();
  </script>
</body>
</html>
