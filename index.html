<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ore Damage Calculator</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body.dark-mode {
      background-color: #121212;
      color: white;
    }

    .settings-tab {
      position: fixed;
      top: 50%;
      right: 0;
      transform: translateY(-50%);
      background: #007bff;
      color: white;
      padding: 10px;
      border-radius: 8px 0 0 8px;
      cursor: pointer;
      z-index: 9999;
    }

    .settings-panel {
      position: fixed;
      top: 0;
      right: -300px;
      width: 300px;
      height: 100vh;
      background: #f4f4f4;
      box-shadow: -2px 0 5px rgba(0, 0, 0, 0.3);
      transition: right 0.3s ease;
      padding: 20px;
      z-index: 9998;
    }

    .settings-panel.show {
      right: 0;
    }

    .dark-mode .settings-panel {
      background: #333;
      color: white;
    }

    .dark-mode input,
    .dark-mode textarea {
      background: #222;
      color: white;
      border: 1px solid #555;
    }
  </style>
</head>
<body class="dark-mode">
  <div class="container mt-5">
    <h1 class="text-center">Ore Damage Per Hit Calculator</h1>

    <div class="row mt-4">
      <div class="col-md-4">
        <div class="card p-3 bg-dark text-white">
          <label for="baseDmg">Eren's Base Damage:</label>
          <input type="number" id="baseDmg" class="form-control" value="0" />

          <label class="mt-2">#4mr (Piercing) Level (0-5):</label>
          <input type="number" id="mrLevel" class="form-control" value="0" />

          <label class="mt-2">Piercing Enchant Level (0-50):</label>
          <input type="number" id="enchantLevel" class="form-control" value="0" />

          <label class="mt-2">Aquamarine Mastery Level (0-10):</label>
          <input type="number" id="aquaLevel" class="form-control" value="0" />

          <button class="btn btn-primary mt-3" onclick="calculateDamage()">Calculate</button>
        </div>
      </div>

      <div class="col-md-8">
        <table class="table table-dark table-bordered">
          <thead>
            <tr>
              <th>Ore</th>
              <th>HP</th>
              <th>Defense</th>
              <th>Damage Dealt</th>
              <th>1-Shot?</th>
            </tr>
          </thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="settings-tab" onclick="toggleSettings()">⚙️</div>

  <div class="settings-panel" id="settingsPanel">
    <h5>Settings</h5>
    <hr />
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="darkModeSwitch" checked onchange="toggleDarkMode()">
      <label class="form-check-label" for="darkModeSwitch">Dark Mode</label>
    </div>

    <hr />
    <h6>Report Bug / Feedback</h6>
    <textarea class="form-control mb-2" rows="4" placeholder="Describe the issue..."></textarea>
    <button class="btn btn-success w-100">Submit</button>
  </div>

  <script>
    const ores = [
      { name: "Iron", hp: 1000, defense: 10 },
      { name: "Gold", hp: 3000, defense: 25 },
      { name: "Diamond", hp: 6000, defense: 50 },
    ];

    function calculateDamage() {
      const base = parseFloat(document.getElementById("baseDmg").value);
      const mr = parseInt(document.getElementById("mrLevel").value);
      const enchant = parseInt(document.getElementById("enchantLevel").value);
      const aqua = parseInt(document.getElementById("aquaLevel").value);

      const pierceMult = 1 + 0.06 * mr + 0.01 * enchant + 0.02 * aqua;
      const damage = base * pierceMult;

      const tbody = document.getElementById("resultsBody");
      tbody.innerHTML = "";
      ores.forEach((ore) => {
        const reduced = damage * (100 / (100 + ore.defense));
        const isOneShot = reduced >= ore.hp ? "✅" : "❌";

        tbody.innerHTML += `
          <tr>
            <td>${ore.name}</td>
            <td>${ore.hp}</td>
            <td>${ore.defense}</td>
            <td>${Math.floor(reduced)}</td>
            <td>${isOneShot}</td>
          </tr>`;
      });
    }

    function toggleSettings() {
      document.getElementById("settingsPanel").classList.toggle("show");
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }
  </script>
</body>
</html>
